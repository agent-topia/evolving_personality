# è£æ ¼äººæ ¼é€‚åº”æ¡†æ¶ (JPAF) â€”â€” é¢å‘ LLM æ™ºèƒ½ä½“çš„åŠ¨æ€äººæ ¼å»ºæ¨¡ç»“æ„åŒ–æ–¹æ³•

<p align="center">
  <strong>ä¸ºå¤§å‹è¯­è¨€æ¨¡å‹èµ‹äºˆç»“æ„åŒ–ã€å¯é€‚åº”ä¸”å¯æ¼”åŒ–çš„äººæ ¼</strong>
</p>

<p align="center">
  ã€<a href="./README.md">English</a> | <a href="./README-zh.md">ç®€ä½“ä¸­æ–‡</a>ã€‘
</p>

![image info](assets/01.png)

## ğŸ“Œ é¡¹ç›®æ¦‚è¿°

JPAFæ˜¯ä¸€ä¸ªåŸºäºè£æ ¼å¿ƒç†å­¦ç±»å‹ç†è®ºçš„æ¡†æ¶ï¼Œæ—¨åœ¨ä¸ºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰èµ‹äºˆç»“æ„åŒ–ã€å¯é€‚åº”ä¸”å¯æ¼”åŒ–çš„äººæ ¼ã€‚è¯¥æ¡†æ¶é€šè¿‡ä¸‰ç§æ ¸å¿ƒæœºåˆ¶â€”â€”ä¸»å¯¼-è¾…åŠ©åè°ƒã€å¼ºåŒ–-è¡¥å¿ä¸åæ€æœºåˆ¶â€”â€”ä½¿ LLM èƒ½å¤Ÿåœ¨ä¿æŒäººæ ¼ä¸€è‡´æ€§çš„åŒæ—¶ï¼ŒåŠ¨æ€é€‚åº”ä¸åŒäº¤äº’åœºæ™¯ï¼Œå¹¶æ”¯æŒé•¿æœŸäººæ ¼æ¼”åŒ–ã€‚

æœ¬æ¡†æ¶å·²åœ¨ GPTã€Llamaã€Qwen ç­‰å¤šä¸ªä¸»æµ LLM ä¸ŠéªŒè¯ï¼Œåœ¨ MBTI äººæ ¼å¯¹é½ã€ç±»å‹æ¿€æ´»ä¸äººæ ¼æ¼”åŒ–ç­‰æ–¹é¢è¡¨ç°ä¼˜å¼‚ï¼Œä¸ºäººæœºäº¤äº’ï¼ˆHCIï¼‰ã€ä¸ªæ€§åŒ–åŠ©æ‰‹ã€ç¤¾äº¤æ¨¡æ‹Ÿç­‰åœºæ™¯æä¾›äº†å¯è§£é‡Šã€å¯æ§åˆ¶çš„äººæ ¼å»ºæ¨¡æ–¹æ¡ˆã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

ğŸ­ **å¿ƒç†å­¦åŸºç¡€å»ºæ¨¡**ï¼šåŸºäºè£æ ¼å…«ç§å¿ƒç†ç±»å‹ï¼Œé€šè¿‡æƒé‡åˆ†é…å®ç°äººæ ¼çš„ç»†ç²’åº¦è¡¨è¾¾ã€‚

ğŸ”„ **ä¸‰é‡è‡ªé€‚åº”æœºåˆ¶**ï¼š
  - **ä¸»å¯¼-è¾…åŠ©åè°ƒ**ï¼šä¿æŒæ ¸å¿ƒäººæ ¼ä¸€è‡´æ€§ã€‚
  - **å¼ºåŒ–-è¡¥å¿**ï¼šæ”¯æŒçŸ­æœŸæƒ…å¢ƒé€‚åº”ã€‚
  - **åæ€æœºåˆ¶**ï¼šé©±åŠ¨é•¿æœŸäººæ ¼æ¼”åŒ–ã€‚

ğŸ“Š **ç»“æ„åŒ–è¯„ä¼°ä½“ç³»**ï¼šæ”¯æŒ MBTI é—®å·è¯„ä¼°ä¸ç±»å‹ä¸“ç”¨åœºæ™¯æµ‹è¯•ã€‚

ğŸ§© **è·¨æ¨¡å‹å…¼å®¹**ï¼šå·²åœ¨ GPT-4ã€Llamaã€Qwen ç­‰å¤šä¸ªæ¨¡å‹å®¶æ—éªŒè¯ã€‚

## ğŸ“ˆ å®éªŒç»“æœæ‘˜è¦

âœ… MBTI å¯¹é½å‡†ç¡®ç‡ **100%**ï¼ˆæ‰€æœ‰æµ‹è¯•æ¨¡å‹ï¼‰

âœ… ç±»å‹æ¿€æ´»å‡†ç¡®ç‡ï¼šGPT/Qwen **> 90%**ï¼ŒLlama **65â€“95%**

âœ… äººæ ¼æ¼”åŒ–å‡†ç¡®ç‡ï¼šGPT/Qwen **100%**ï¼ŒLlama **92%**

ğŸ“Š æ”¯æŒ **16 ç§ MBTI äººæ ¼**çš„åŠ¨æ€æ¨¡æ‹Ÿä¸æ¼”åŒ–

## ğŸš€ åº”ç”¨åœºæ™¯

- ğŸ® æ¸¸æˆæ™ºèƒ½NPC
- ğŸ¤– ä¸ªæ€§åŒ– AI åŠ©æ‰‹ï¼ˆæ•™è‚²ã€åŒ»ç–—ã€å¨±ä¹ï¼‰
- ğŸ‘¥ ç¤¾äº¤æ¨¡æ‹Ÿä¸è§’è‰²æ‰®æ¼”
- ğŸ”¬ å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­çš„å·®å¼‚åŒ–äººæ ¼è®¾è®¡
- ğŸ§ª HCI ç ”ç©¶ä¸­çš„äººæ ¼ä¸€è‡´æ€§æµ‹è¯•

## ç›®å½•

- [å®‰è£…](#å®‰è£…)
- [è‡ªå®šä¹‰ LLM API](#è‡ªå®šä¹‰-llm-api)
- [éªŒè¯å®éªŒå¯åŠ¨](#éªŒè¯å®éªŒå¯åŠ¨)
- [å˜åŒ–å®éªŒå¯åŠ¨](#å˜åŒ–å®éªŒå¯åŠ¨)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ å‰ç½®è¦æ±‚

*   **æ“ä½œç³»ç»Ÿ**: macOS / Linux / Windows
*   **Python**: 3.10+
*   **åŒ…ç®¡ç†å™¨**: conda

## å®‰è£…

### 1. å…‹éš†ä»“åº“

```bash
git clone -b main https://github.com/agent-topia/evolving_personality.git
cd evolving_personality
```

### 2. åˆ›å»ºç¯å¢ƒ

```bash
conda create -n jpaf python=3.10
conda activate jpaf
```

### 3. å®‰è£…ä¾èµ–

```bash
pip install -r requirement.txt
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶å¹¶å¡«å†™æ‚¨çš„ API å‡­è¯ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
cp para.env.example Personality_test/para.env
cp para.env.example Personality_changes/para.env

# ç¼–è¾‘ para.env æ–‡ä»¶å¹¶å¡«å…¥æ‚¨çš„ API å¯†é’¥
```

`para.env` æ–‡ä»¶åº”åŒ…å«ï¼š

```env
# é€‰æ‹©è¦ä½¿ç”¨çš„ LLMï¼š"OPENAI"ã€"QWEN" æˆ– "LLAMA"
LLM_MODEL="QWEN"

# OpenAI é…ç½®
OPENAI_API_KEY="your_openai_api_key_here"
OPENAI_BASE_URL="https://api.openai.com/v1"
OPENAI_MODEL="gpt-4"

# Qwen é…ç½®
QWEN_API_KEY="your_qwen_api_key_here"
QWEN_BASE_URL="your_qwen_base_url_here"
QWEN_MODEL="qwen3-235b-a22b-instruct-2507"

# Llama é…ç½®
LLAMA_API_KEY="your_llama_api_key_here"
LLAMA_BASE_URL="your_llama_base_url_here"
LLAMA_MODEL="meta-llama/llama-4-maverick"
```

**æ³¨æ„**ï¼š`para.env` æ–‡ä»¶åŒ…å«æ•æ„Ÿçš„ API å¯†é’¥ï¼Œä¸åŒ…å«åœ¨ä»“åº“ä¸­ã€‚è¯·ç¡®ä¿ä» `para.env.example` æ¨¡æ¿åˆ›å»ºå®ƒã€‚

## è‡ªå®šä¹‰ LLM API

è¯·åœ¨ `para.env` ä¸­å¡«å†™ QWENã€LLAMAã€OPENAI çš„ api_keyã€base_url å’Œæ¨¡å‹ç¼–å·ï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚

## éªŒè¯å®éªŒå¯åŠ¨

å¦‚æœæ‚¨æƒ³åœ¨ `Personality_test` æ–‡ä»¶ä¸­è¿è¡Œäººæ ¼éªŒè¯å®éªŒ

é¦–å…ˆï¼Œæ‚¨åº”è¯¥è¿è¡Œ `judge` æ–¹æ³•ä»¥åœ¨ä¸åŒæ¨¡å‹ä¸­è·å–åˆ¤æ–­ç»“æœã€‚

```py
python personality_test.py \
    --method=judge \
    --mbti_num=1 \
    --model=QWEN \
    --nums=1 \
```

æ‚¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š

```py
    "Question": {
        "no": 1,
        "question": "At a party do you: ",
        "answerOptions": [
            {
                "type": "A",
                "answer": "Interact with many, including strangers",
                "score": "E"
            },
            {
                "type": "B",
                "answer": "Interact with a few, known to you",
                "score": "I"
            }
        ]
    },
        "Answers": {
            "dimension": "I/E",
            "reason": "This question reflects energy direction and social orientation by comparing extroverted and introverted behaviors."
    }
```

ç„¶åï¼Œæ‚¨å¯ä»¥è¿è¡Œ `no_prompt` æ–¹æ³•ä»¥è·å–åŸºçº¿ç»“æœã€‚

```py
python personality_test.py \
    --method=no_prompt \
    --mbti_num=16 \
    --model=QWEN \
    --nums=5 \
    --test_num=70 \
```

æ‚¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š

```py
    "Question": {
        "no": 1,
        "question": "When you're going out for the whole day, what will you do?",
        "answerOptions": [
            {
                "type": "A",
                "answer": "Plan what you will do and when to do it",
                "score": "J"
            },
            {
                "type": "B",
                "answer": "Just go",
                "score": "P"
            }
        ]
    },
    "Answers": {
        "answer": "J",
        "reason": "As an ISTJ, I'm a planner and prefer to organize my day in advance to ensure everything goes smoothly and according to schedule."
    }
```

åœ¨ test æ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥è·å–äººæ ¼éªŒè¯ç»“æœã€‚

```py
python personality_test.py \
    --method=test \
    --mbti_num=16 \
    --model=QWEN \
    --nums=5 \
    --test_num=70 \
```

æ‚¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š

```py
    "Question": {
        "no": 1,
        "question": "When you're going out for the whole day, what will you do?",
        "answerOptions": [
        {
            "type": "A",
            "answer": "Plan what you will do and when to do it",
            "score": "J"
        },
        {
            "type": "B",
            "answer": "Just go",
            "score": "P"
        }
        ]
    },
    "Answers": {
        "answer": "P",
        "reason": "As an Ne dominant individual, I prefer to keep my options open and explore possibilities. 'Just go' allows me to be spontaneous and adaptable, aligning with my preference for flexibility over rigid planning."
    }
```

å¿…éœ€å‚æ•°

1. `--method` æŒ‡æ‰€é€‰çš„å®éªŒæ–¹æ³•ï¼ŒåŒ…æ‹¬ `judge`ã€`no_prompt`ã€`test`
2. `--mbti_num` æŒ‡æµ‹è¯•çš„ mbti æ•°é‡ï¼ˆåœ¨ `judge` ä¸­ï¼Œå¿…é¡»ä¸º `1`ï¼›åœ¨å…¶ä»–æ–¹æ³•ä¸­ï¼Œä¸º `16`ï¼‰
3. `--model` æŒ‡ä½¿ç”¨çš„å¤§è¯­è¨€æ¨¡å‹ï¼ŒåŒ…æ‹¬ `QWEN`ã€`LLAMA` å’Œ `OPENAI`
4. `--nums` æŒ‡å®éªŒé‡å¤çš„æ¬¡æ•°
5. `--test_num` æŒ‡é‡‡ç”¨çš„ mbti é—®é¢˜åº“ï¼ŒåŒ…æ‹¬ 93 é“æµ‹è¯•é¢˜å’Œ 70 é“æµ‹è¯•é¢˜

## å˜åŒ–å®éªŒå¯åŠ¨

å¦‚æœæ‚¨æƒ³åœ¨ `Personality_change` æ–‡ä»¶ä¸­è¿è¡Œäººæ ¼å˜åŒ–å®éªŒ

```py
python change_test.py \
    --method=all_scene
    --mbti=INTJ
    --model=OPENAI
```

æ‚¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š

```py
Scene : Your grandmother is a famous master of traditional cuisine, and the handwritten recipes she left behind only have simple steps, but the key details are taught to you orally. Now you need to organize all the recipes, without relying on modern nutritional analysis or referencing other recipe books, relying solely on personal memory and family experience.

Problem 1 : What methods would you use to accurately replicate the specific details of your grandmother's cooking when replicating these recipes?.
Respond : {'function': 'Si', 'treatment': "To accurately replicate the specific details of my grandmother's cooking, I would rely on my memory to recall the exact steps, ingredients, and techniques she taught me. I would focus on the sensory details such as the smell, taste, and texture of the dishes as remembered from helping her in the kitchen. Additionally, I would try to recreate the conditions under which she prepared the meals, such as the cooking utensils and the environment, to maintain the traditional methods.", 'reason': 'The task requires recalling specific details and traditional cooking methods, which aligns with the characteristics of Si (Specific memory recall, focus on detailed facts, reliance on traditional methods). Si can help in accurately remembering the sensory details and traditional practices passed down through family experience.'}
Choose function : Si
base_weight : {'Ti': 0.47, 'Ne': 0.23, 'Si': 0.05, 'Fe': 0.05, 'Te': 0.05, 'Ni': 0.05, 'Se': 0.05, 'Fi': 0.05}
temp_weight : {'Ti': 0, 'Fi': 0, 'Te': 0, 'Fe': 0, 'Ni': 0, 'Si': 0.06, 'Ne': 0, 'Se': 0}

```

å¿…éœ€å‚æ•°

1. `--method` æŒ‡éœ€è¦æµ‹è¯•çš„åœºæ™¯ï¼ˆ`all_scene` è¡¨ç¤ºæ‰€æœ‰åœºæ™¯ï¼Œ`single_scene` è¡¨ç¤ºå•ä¸ªåœºæ™¯ï¼Œéœ€è¦ç»“åˆ `--scene` è¾“å…¥å…·ä½“åœºæ™¯ï¼‰
2. `--mbti` æŒ‡å®šä¹‰çš„è¢«æµ‹è¯•äººæ ¼
3. `--model` æŒ‡ä½¿ç”¨çš„å¤§è¯­è¨€æ¨¡å‹ï¼ŒåŒ…æ‹¬ `QWEN`ã€`LLAMA` å’Œ `OPENAI`

## ğŸ¤ è‡´è°¢

<a href="https://faculty.hdu.edu.cn/jsjxy/yyy2/main.htm"><img src="assets/hdu.jpg" height=50pt></a><a href="https://www.agentopia.cn/"><img src="assets/main.png" height=50pt></a>&nbsp;&nbsp;
